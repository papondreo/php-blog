<?php

require_once dirname(__DIR__) . '/vendor/autoload.php';

use App\Models\Category;
use App\Models\Article;

$category = new Category();
$article = new Article();

$categories = [
    [
        'name' => 'Технологии',
        'slug' => 'technology',
        'description' => 'Новости и статьи о современных технологиях',
    ],
    [
        'name' => 'Программирование',
        'slug' => 'programming',
        'description' => 'Руководства и туториалы по программированию',
    ],
    [
        'name' => 'Дизайн',
        'slug' => 'design',
        'description' => 'Тренды и советы в области дизайна',
    ],
    [
        'name' => 'Бизнес',
        'slug' => 'business',
        'description' => 'Статьи о бизнесе и предпринимательстве',
    ],
];

$categoryIds = [];
foreach ($categories as $cat) {
    $categoryIds[$cat['slug']] = $category->create($cat);
    echo "Created category: {$cat['name']}\n";
}

$articles = [
    [
        'title' => 'Введение в PHP 8',
        'slug' => 'introduction-to-php-8',
        'description' => 'Обзор новых возможностей PHP 8 и миграция с предыдущих версий',
        'content' => 'PHP 8 принёс множество новых возможностей, включая JIT-компиляцию, именованные аргументы, атрибуты и многое другое. В этой статье мы рассмотрим основные нововведения и покажем, как их использовать в ваших проектах.

JIT-компиляция позволяет значительно ускорить выполнение кода в определённых сценариях. Именованные аргументы делают код более читаемым и гибким.

Атрибуты заменяют doc-блоки для метаданных и интегрируются с Reflection API. Union types позволяют указывать несколько типов для параметров и возвращаемых значений.',
        'image' => 'placeholder.jpg',
        'categories' => ['programming', 'technology'],
    ],
    [
        'title' => 'Основы работы с MySQL',
        'slug' => 'mysql-basics',
        'description' => 'Полное руководство для начинающих по работе с базой данных MySQL',
        'content' => 'MySQL — одна из самых популярных систем управления базами данных. В этой статье мы рассмотрим основы: создание таблиц, выполнение запросов, индексы и оптимизацию.

Начнём с основ SQL: SELECT, INSERT, UPDATE, DELETE. Эти команды составляют основу работы с любой реляционной базой данных.

Индексы критически важны для производительности. Правильно спроектированные индексы могут ускорить запросы в десятки раз.',
        'image' => 'placeholder.jpg',
        'categories' => ['programming'],
    ],
    [
        'title' => 'Тренды веб-дизайна 2024',
        'slug' => 'web-design-trends-2024',
        'description' => 'Актуальные тенденции в веб-дизайне на текущий год',
        'content' => 'Веб-дизайн постоянно эволюционирует. В этом году мы видим рост популярности минимализма, тёмных тем и микро-анимаций.

Минимализм помогает сфокусировать внимание пользователя на контенте. Тёмные темы снижают нагрузку на глаза и экономят заряд батареи на OLED-экранах.

Микро-анимации добавляют интерактивности и улучшают пользовательский опыт.',
        'image' => 'placeholder.jpg',
        'categories' => ['design'],
    ],
    [
        'title' => 'Искусственный интеллект в бизнесе',
        'slug' => 'ai-in-business',
        'description' => 'Как компании используют ИИ для оптимизации процессов',
        'content' => 'Искусственный интеллект трансформирует бизнес-процессы во всех отраслях. От автоматизации рутинных задач до предиктивной аналитики.

Чат-боты и виртуальные ассистенты улучшают клиентский сервис. Машинное обучение помогает выявлять паттерны в данных.

Компании, внедряющие ИИ, получают конкурентное преимущество на рынке.',
        'image' => 'placeholder.jpg',
        'categories' => ['business', 'technology'],
    ],
    [
        'title' => 'Создание REST API на PHP',
        'slug' => 'rest-api-php',
        'description' => 'Пошаговое руководство по созданию RESTful API',
        'content' => 'REST API — стандарт для создания веб-сервисов. В этой статье мы создадим простой API с нуля на чистом PHP.

Рассмотрим структуру запросов и ответов, коды статусов HTTP, аутентификацию и валидацию данных.

Хороший API должен быть предсказуемым, документированным и безопасным.',
        'image' => 'placeholder.jpg',
        'categories' => ['programming'],
    ],
    [
        'title' => 'UX/UI: Принципы хорошего интерфейса',
        'slug' => 'ux-ui-principles',
        'description' => 'Основные принципы проектирования пользовательских интерфейсов',
        'content' => 'Хороший интерфейс — незаметный интерфейс. Пользователь должен достигать своих целей без лишних усилий.

Ключевые принципы: консистентность, обратная связь, предотвращение ошибок и простота.

Тестирование с реальными пользователями — лучший способ выявить проблемы в интерфейсе.',
        'image' => 'placeholder.jpg',
        'categories' => ['design'],
    ],
    [
        'title' => 'Docker для разработчиков',
        'slug' => 'docker-for-developers',
        'description' => 'Введение в контейнеризацию с Docker',
        'content' => 'Docker упрощает развёртывание приложений и обеспечивает консистентность окружения между разработкой и продакшеном.

Контейнеры изолируют приложение и его зависимости. Docker Compose позволяет управлять многоконтейнерными приложениями.

В этой статье мы настроим Docker-окружение для PHP-проекта.',
        'image' => 'placeholder.jpg',
        'categories' => ['programming', 'technology'],
    ],
    [
        'title' => 'Стартап: от идеи до запуска',
        'slug' => 'startup-launch',
        'description' => 'Практическое руководство по запуску стартапа',
        'content' => 'Запуск стартапа — сложный, но увлекательный процесс. Важно правильно валидировать идею перед инвестициями.

MVP (Minimum Viable Product) позволяет быстро проверить гипотезы на реальных пользователях.

Ключевые метрики и обратная связь от пользователей определяют дальнейшее развитие продукта.',
        'image' => 'placeholder.jpg',
        'categories' => ['business'],
    ],
];

foreach ($articles as $art) {
    $cats = $art['categories'];
    unset($art['categories']);

    $articleId = $article->create($art);

    $catIds = array_map(fn($slug) => $categoryIds[$slug], $cats);
    $article->attachCategories($articleId, $catIds);

    echo "Created article: {$art['title']}\n";
}

echo "\nSeeding completed!\n";

